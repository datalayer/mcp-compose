# MCP Compose Configuration
# Anaconda Authentication Example

[composer]
name = "anaconda-composer"
conflict_resolution = "prefix"  # Prefix tool names with server name
log_level = "INFO"

# ============================================================================
# Authentication Configuration
# ============================================================================
# Anaconda bearer token validation
# The composer validates incoming bearer tokens using:
#   from anaconda_auth.token import TokenInfo
#   TokenInfo(domain="anaconda.com", api_key=bearer_token).get_access_token()
#
# Clients must provide valid Anaconda bearer tokens in Authorization header:
#   Authorization: Bearer <your_anaconda_token>

[authentication]
enabled = true
providers = ["anaconda"]
default_provider = "anaconda"

[authentication.anaconda]
domain = "anaconda.com"

# ============================================================================
# Backend MCP Servers (No auth - accessed via composer only)
# ============================================================================

# Calculator MCP Server (Proxied via STDIO)
[[servers.proxied.stdio]]
name = "calculator"
command = ["python", "mcp1.py"]
restart_policy = "never"
# Calculator tools: add, subtract, multiply, divide

# Echo MCP Server (Proxied via STDIO)
[[servers.proxied.stdio]]
name = "echo"
command = ["python", "mcp2.py"]
restart_policy = "never"
# Echo tools: ping, echo, reverse, uppercase, lowercase, count_words
